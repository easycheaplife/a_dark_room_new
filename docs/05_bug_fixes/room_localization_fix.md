# Room.dart æœ¬åœ°åŒ–ä¿®å¤

## ğŸ“‹ é—®é¢˜æè¿°

`room.dart`æ–‡ä»¶ä¸­å­˜åœ¨å¤§é‡è‹±æ–‡ç¡¬ç¼–ç ï¼Œä¸»è¦é›†ä¸­åœ¨ï¼š
1. **craftables**ï¼ˆå¯åˆ¶ä½œç‰©å“ï¼‰çš„æ¶ˆæ¯æ–‡æœ¬
2. **tradeGoods**ï¼ˆäº¤æ˜“ç‰©å“ï¼‰çš„æ¶ˆæ¯æ–‡æœ¬
3. **é”™è¯¯æç¤ºæ¶ˆæ¯**

è¿™äº›ç¡¬ç¼–ç å¯¼è‡´æ¸¸æˆç•Œé¢åœ¨ä¸­æ–‡ç¯å¢ƒä¸‹ä»æ˜¾ç¤ºè‹±æ–‡æ–‡æœ¬ï¼Œå½±å“ç”¨æˆ·ä½“éªŒã€‚

## ğŸ” é—®é¢˜åˆ†æ

### ç¡¬ç¼–ç ä½ç½®

#### 1. å¯åˆ¶ä½œç‰©å“æ¶ˆæ¯
```dart
// ä¿®å¤å‰ï¼šç›´æ¥ä½¿ç”¨è‹±æ–‡å­—ç¬¦ä¸²
'availableMsg': 'builder says she can make traps to catch any creatures might still be alive out there',
'buildMsg': 'more traps to catch more creatures',
'maxMsg': "more traps won't help now",

// ä¿®å¤åï¼šä½¿ç”¨æœ¬åœ°åŒ–é”®
'availableMsg': 'craftables.trap.availableMsg',
'buildMsg': 'craftables.trap.buildMsg',
'maxMsg': 'craftables.trap.maxMsg',
```

#### 2. é”™è¯¯æ¶ˆæ¯
```dart
// ä¿®å¤å‰ï¼šç¡¬ç¼–ç è‹±æ–‡
NotificationManager().notify(name, 'Not enough $k');

// ä¿®å¤åï¼šä½¿ç”¨æœ¬åœ°åŒ–
NotificationManager().notify(name, 
    '${_localization.translate('notifications.not_enough')} ${_localization.translate(k)}');
```

#### 3. æ¶ˆæ¯æ˜¾ç¤º
```dart
// ä¿®å¤å‰ï¼šç›´æ¥æ˜¾ç¤ºè‹±æ–‡
NotificationManager().notify(name, craftable['buildMsg']);

// ä¿®å¤åï¼šç¿»è¯‘åæ˜¾ç¤º
NotificationManager().notify(name, _localization.translate(craftable['buildMsg']));
```

## ğŸ› ï¸ ä¿®å¤æ–¹æ¡ˆ

### 1. æ·»åŠ æœ¬åœ°åŒ–ç¿»è¯‘

åœ¨`assets/lang/zh.json`ä¸­æ·»åŠ `craftables`éƒ¨åˆ†ï¼š

```json
"craftables": {
  "trap": {
    "availableMsg": "å»ºé€ è€…è¯´å¥¹å¯ä»¥åˆ¶ä½œé™·é˜±æ¥æ•æ‰å¤–é¢å¯èƒ½è¿˜æ´»ç€çš„ç”Ÿç‰©",
    "buildMsg": "æ›´å¤šé™·é˜±å¯ä»¥æ•æ‰æ›´å¤šç”Ÿç‰©",
    "maxMsg": "æ›´å¤šé™·é˜±ç°åœ¨ä¹Ÿå¸®ä¸ä¸Šå¿™äº†"
  },
  "cart": {
    "availableMsg": "å»ºé€ è€…è¯´å¥¹å¯ä»¥åˆ¶ä½œä¸€è¾†è¿æœ¨æçš„æ‰‹æ¨è½¦",
    "buildMsg": "è¿™è¾†æ‘‡æ‘‡æ™ƒæ™ƒçš„æ‰‹æ¨è½¦å¯ä»¥ä»æ£®æ—é‡Œè¿æ›´å¤šæœ¨æ"
  },
  // ... å…¶ä»–ç‰©å“ç¿»è¯‘
}
```

### 2. ä¿®æ”¹ç¡¬ç¼–ç æ–‡æœ¬

å°†æ‰€æœ‰è‹±æ–‡ç¡¬ç¼–ç æ›¿æ¢ä¸ºæœ¬åœ°åŒ–é”®ï¼š

#### æ¶‰åŠçš„ç‰©å“ç±»å‹
- **å»ºç­‘ç±»**ï¼štrap, cart, hut, lodge, trading post, tannery, smokehouse, workshop, steelworks, armoury
- **å·¥å…·ç±»**ï¼štorch
- **å‡çº§ç±»**ï¼šwaterskin, cask, water tank, rucksack, wagon, convoy
- **æ­¦å™¨ç±»**ï¼šbone spear, iron sword, steel sword, rifle
- **æŠ¤ç”²ç±»**ï¼šl armour, i armour, s armour

### 3. ä¿®æ”¹æ¶ˆæ¯æ˜¾ç¤ºé€»è¾‘

æ›´æ–°æ‰€æœ‰æ˜¾ç¤ºæ¶ˆæ¯çš„åœ°æ–¹ï¼Œä½¿å…¶ä½¿ç”¨æœ¬åœ°åŒ–ï¼š

```dart
// å»ºé€ æ¶ˆæ¯
if (craftable['buildMsg'] != null) {
  NotificationManager().notify(name, _localization.translate(craftable['buildMsg']));
}

// è´­ä¹°æ¶ˆæ¯
if (good['buildMsg'] != null) {
  NotificationManager().notify(name, _localization.translate(good['buildMsg']));
}

// æœ€å¤§æ•°é‡æ¶ˆæ¯
if (craftable['maxMsg'] != null) {
  NotificationManager().notify(name, _localization.translate(craftable['maxMsg']));
}
```

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

### 1. `assets/lang/zh.json`
- âœ… æ·»åŠ äº†`craftables`éƒ¨åˆ†ï¼ŒåŒ…å«æ‰€æœ‰å¯åˆ¶ä½œç‰©å“çš„ä¸­æ–‡ç¿»è¯‘
- âœ… æ¶µç›–äº†`availableMsg`ã€`buildMsg`ã€`maxMsg`ä¸‰ç§æ¶ˆæ¯ç±»å‹

### 2. `lib/modules/room.dart`
- âœ… å°†æ‰€æœ‰ç¡¬ç¼–ç çš„è‹±æ–‡æ¶ˆæ¯æ›¿æ¢ä¸ºæœ¬åœ°åŒ–é”®
- âœ… ä¿®æ”¹äº†æ¶ˆæ¯æ˜¾ç¤ºé€»è¾‘ï¼Œä½¿ç”¨`_localization.translate()`
- âœ… ä¿®å¤äº†é”™è¯¯æ¶ˆæ¯çš„æœ¬åœ°åŒ–æ˜¾ç¤º

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•ç»“æœ
- âœ… æ¸¸æˆå¯åŠ¨æ­£å¸¸ï¼Œæ— ç¼–è¯‘é”™è¯¯
- âœ… å»ºé€ æ¶ˆæ¯æ­£ç¡®æ˜¾ç¤ºä¸­æ–‡ç¿»è¯‘
- âœ… é”™è¯¯æç¤ºæ­£ç¡®æ˜¾ç¤ºä¸­æ–‡ç¿»è¯‘
- âœ… æœ€å¤§æ•°é‡æç¤ºæ­£ç¡®æ˜¾ç¤ºä¸­æ–‡ç¿»è¯‘
- âœ… æ‰€æœ‰æ¸¸æˆåŠŸèƒ½æ­£å¸¸å·¥ä½œ

### æµ‹è¯•å‘½ä»¤
```bash
flutter run -d chrome
```

## ğŸ“Š ä¿®å¤ç»Ÿè®¡

### ä¿®å¤çš„ç¡¬ç¼–ç æ•°é‡
- **å¯åˆ¶ä½œç‰©å“æ¶ˆæ¯**ï¼š36ä¸ªè‹±æ–‡å­—ç¬¦ä¸² â†’ æœ¬åœ°åŒ–é”®
- **é”™è¯¯æ¶ˆæ¯**ï¼š2ä¸ªç¡¬ç¼–ç  â†’ æœ¬åœ°åŒ–è°ƒç”¨
- **æ¶ˆæ¯æ˜¾ç¤ºé€»è¾‘**ï¼š4å¤„ç›´æ¥æ˜¾ç¤º â†’ ç¿»è¯‘åæ˜¾ç¤º

### æ¶‰åŠçš„ç‰©å“æ•°é‡
- **å»ºç­‘ç±»**ï¼š10ä¸ª
- **å·¥å…·ç±»**ï¼š1ä¸ª
- **å‡çº§ç±»**ï¼š6ä¸ª
- **æ­¦å™¨ç±»**ï¼š4ä¸ª
- **æŠ¤ç”²ç±»**ï¼š3ä¸ª
- **æ€»è®¡**ï¼š24ä¸ªç‰©å“çš„å®Œæ•´æœ¬åœ°åŒ–

## ğŸ¯ ä¿®å¤æ•ˆæœ

### ç”¨æˆ·ä½“éªŒæ”¹è¿›
1. **ç•Œé¢ä¸€è‡´æ€§**ï¼šæ‰€æœ‰æ–‡æœ¬éƒ½æ˜¾ç¤ºä¸ºä¸­æ–‡ï¼Œæä¾›ç»Ÿä¸€çš„ç”¨æˆ·ä½“éªŒ
2. **ä¿¡æ¯æ¸…æ™°åº¦**ï¼šä¸­æ–‡æç¤ºæ›´å®¹æ˜“ç†è§£ï¼Œé™ä½å­¦ä¹ æˆæœ¬
3. **ä¸“ä¸šæ€§**ï¼šå®Œæ•´çš„æœ¬åœ°åŒ–ä½“ç°äº†æ¸¸æˆçš„ä¸“ä¸šå“è´¨

### ä»£ç è´¨é‡æå‡
1. **å¯ç»´æŠ¤æ€§**ï¼šé›†ä¸­ç®¡ç†ç¿»è¯‘æ–‡æœ¬ï¼Œä¾¿äºåç»­ä¿®æ”¹
2. **å¯æ‰©å±•æ€§**ï¼šä¸ºå…¶ä»–è¯­è¨€çš„æ”¯æŒå¥ å®šäº†åŸºç¡€
3. **ä¸€è‡´æ€§**ï¼šç»Ÿä¸€çš„æœ¬åœ°åŒ–è°ƒç”¨æ–¹å¼

## ğŸ“‹ æ€»ç»“

è¿™æ¬¡ä¿®å¤æˆåŠŸè§£å†³äº†`room.dart`æ–‡ä»¶ä¸­çš„è‹±æ–‡ç¡¬ç¼–ç é—®é¢˜ï¼Œå®ç°äº†å®Œæ•´çš„ä¸­æ–‡æœ¬åœ°åŒ–ã€‚é€šè¿‡ç³»ç»Ÿæ€§åœ°æ›¿æ¢ç¡¬ç¼–ç æ–‡æœ¬å¹¶æ·»åŠ ç›¸åº”çš„ä¸­æ–‡ç¿»è¯‘ï¼Œç¡®ä¿äº†æ¸¸æˆç•Œé¢çš„ä¸€è‡´æ€§å’Œä¸“ä¸šæ€§ã€‚

ä¿®å¤è¿‡ç¨‹ä¸¥æ ¼éµå¾ªäº†æœ€å°åŒ–ä¿®æ”¹åŸåˆ™ï¼Œåªä¿®æ”¹äº†æœ‰é—®é¢˜çš„éƒ¨åˆ†ï¼Œä¿æŒäº†ä»£ç çš„ç¨³å®šæ€§å’ŒåŠŸèƒ½çš„å®Œæ•´æ€§ã€‚è¿™ä¸ºA Dark Room Flutterç‰ˆæœ¬çš„æœ¬åœ°åŒ–å·¥ä½œæ ‘ç«‹äº†æ ‡å‡†ï¼Œä¸ºåç»­çš„æœ¬åœ°åŒ–ä¿®å¤æä¾›äº†å‚è€ƒæ¨¡æ¿ã€‚
