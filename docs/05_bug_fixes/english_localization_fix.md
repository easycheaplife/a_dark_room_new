# è‹±æ–‡æœ¬åœ°åŒ–ä¿®å¤

## ğŸ“‹ é—®é¢˜æè¿°

åœ¨è‹±æ–‡è¯­è¨€çŠ¶æ€ä¸‹ï¼Œæ¸¸æˆä¸­çš„äº‹ä»¶é€šçŸ¥æ˜¾ç¤ºçš„æ˜¯æœ¬åœ°åŒ–é”®ï¼ˆå¦‚ `craftables.bone spear.buildMsg`ï¼‰è€Œä¸æ˜¯ç¿»è¯‘åçš„è‹±æ–‡æ–‡æœ¬ã€‚è¿™æ˜¯å› ä¸ºè‹±æ–‡ç¿»è¯‘æ–‡ä»¶ `assets/lang/en.json` ä¸­ç¼ºå°‘ `craftables` éƒ¨åˆ†çš„ç¿»è¯‘æ¡ç›®ã€‚

## ğŸ” é—®é¢˜åˆ†æ

### é—®é¢˜ç°è±¡
- **ä¸­æ–‡çŠ¶æ€**ï¼šäº‹ä»¶é€šçŸ¥æ­£å¸¸æ˜¾ç¤ºä¸­æ–‡ç¿»è¯‘
- **è‹±æ–‡çŠ¶æ€**ï¼šäº‹ä»¶é€šçŸ¥æ˜¾ç¤ºæœ¬åœ°åŒ–é”®è€Œéè‹±æ–‡ç¿»è¯‘

### æ ¹æœ¬åŸå› 
1. **ç¼ºå°‘ç¿»è¯‘æ¡ç›®**ï¼š`assets/lang/en.json` æ–‡ä»¶ä¸­æ²¡æœ‰ `craftables` éƒ¨åˆ†
2. **æœ¬åœ°åŒ–æœºåˆ¶**ï¼šå½“æ‰¾ä¸åˆ°å¯¹åº”çš„ç¿»è¯‘æ—¶ï¼Œ`NotificationManager` ä¼šæ˜¾ç¤ºåŸå§‹çš„æœ¬åœ°åŒ–é”®
3. **åŒé‡ç¿»è¯‘é—®é¢˜**ï¼šä¹‹å‰çš„ä»£ç åœ¨è°ƒç”¨ `NotificationManager` æ—¶è¿›è¡Œäº†åŒé‡ç¿»è¯‘

## ğŸ› ï¸ ä¿®å¤æ–¹æ¡ˆ

### 1. ä¿®å¤åŒé‡ç¿»è¯‘é—®é¢˜

**é—®é¢˜ä»£ç **ï¼š
```dart
// é”™è¯¯ï¼šåŒé‡ç¿»è¯‘
NotificationManager().notify(name, _localization.translate(craftable['buildMsg']));
```

**ä¿®å¤å**ï¼š
```dart
// æ­£ç¡®ï¼šè®©NotificationManagerå¤„ç†ç¿»è¯‘
NotificationManager().notify(name, craftable['buildMsg']);
```

### 2. æ·»åŠ è‹±æ–‡ç¿»è¯‘æ¡ç›®

åœ¨ `assets/lang/en.json` ä¸­æ·»åŠ å®Œæ•´çš„ `craftables` éƒ¨åˆ†ï¼š

```json
"craftables": {
  "trap": {
    "availableMsg": "builder says she can make traps to catch any creatures might still be alive out there",
    "buildMsg": "more traps to catch more creatures",
    "maxMsg": "more traps won't help now"
  },
  "cart": {
    "availableMsg": "builder says she can make a cart for carrying wood",
    "buildMsg": "the rickety cart will carry more wood from the forest"
  },
  // ... å…¶ä»–ç‰©å“ç¿»è¯‘
}
```

## ğŸ“ ä¿®æ”¹çš„æ–‡ä»¶

### 1. `lib/modules/room.dart`
- âœ… ç§»é™¤äº†å››å¤„åŒé‡ç¿»è¯‘è°ƒç”¨
- âœ… è®© `NotificationManager` ç»Ÿä¸€å¤„ç†æœ¬åœ°åŒ–

**ä¿®æ”¹ä½ç½®**ï¼š
- ç¬¬932-935è¡Œï¼šè´­ä¹°æ¶ˆæ¯æ˜¾ç¤º
- ç¬¬991-994è¡Œï¼šåˆ¶ä½œæ¶ˆæ¯æ˜¾ç¤º  
- ç¬¬1277-1280è¡Œï¼šå»ºé€ æ¶ˆæ¯æ˜¾ç¤º
- ç¬¬1354-1357è¡Œï¼šè´­ä¹°æ¶ˆæ¯æ˜¾ç¤º
- ç¬¬1240-1247è¡Œï¼šæœ€å¤§æ•°é‡æ¶ˆæ¯æ˜¾ç¤º

### 2. `assets/lang/en.json`
- âœ… æ·»åŠ äº†å®Œæ•´çš„ `craftables` éƒ¨åˆ†
- âœ… åŒ…å«24ä¸ªç‰©å“çš„è‹±æ–‡ç¿»è¯‘
- âœ… æ¶µç›–æ‰€æœ‰æ¶ˆæ¯ç±»å‹ï¼ˆavailableMsgã€buildMsgã€maxMsgï¼‰

**æ–°å¢ç¿»è¯‘æ¡ç›®**ï¼š
- **å»ºç­‘ç±»**ï¼štrap, cart, hut, lodge, trading post, tannery, smokehouse, workshop, steelworks, armoury
- **å·¥å…·ç±»**ï¼štorch
- **å‡çº§ç±»**ï¼šwaterskin, cask, water tank, rucksack, wagon, convoy
- **æ­¦å™¨ç±»**ï¼šbone spear, iron sword, steel sword, rifle
- **æŠ¤ç”²ç±»**ï¼šl armour, i armour, s armour

## ğŸ§ª æµ‹è¯•éªŒè¯

### æµ‹è¯•æ­¥éª¤
1. å¯åŠ¨æ¸¸æˆï¼š`flutter run -d chrome`
2. åˆ‡æ¢åˆ°è‹±æ–‡è¯­è¨€
3. åˆ¶ä½œç‰©å“å¹¶è§‚å¯Ÿé€šçŸ¥æ¶ˆæ¯
4. éªŒè¯æ˜¾ç¤ºè‹±æ–‡ç¿»è¯‘è€Œéæœ¬åœ°åŒ–é”®

### é¢„æœŸç»“æœ
- âœ… è‹±æ–‡çŠ¶æ€ä¸‹æ˜¾ç¤ºæ­£ç¡®çš„è‹±æ–‡ç¿»è¯‘
- âœ… ä¸­æ–‡çŠ¶æ€ä¸‹ç»§ç»­æ˜¾ç¤ºä¸­æ–‡ç¿»è¯‘
- âœ… ä¸å†å‡ºç°æœ¬åœ°åŒ–é”®æ˜¾ç¤º

## ğŸ“Š ä¿®å¤ç»Ÿè®¡

### è§£å†³çš„é—®é¢˜
- **åŒé‡ç¿»è¯‘**ï¼šä¿®å¤äº†5å¤„åŒé‡ç¿»è¯‘è°ƒç”¨
- **ç¼ºå¤±ç¿»è¯‘**ï¼šæ·»åŠ äº†24ä¸ªç‰©å“çš„è‹±æ–‡ç¿»è¯‘
- **æ¶ˆæ¯ç±»å‹**ï¼šè¦†ç›–äº†3ç§æ¶ˆæ¯ç±»å‹çš„ç¿»è¯‘

### æ¶‰åŠçš„ç‰©å“æ•°é‡
- **å»ºç­‘ç±»**ï¼š10ä¸ª
- **å·¥å…·ç±»**ï¼š1ä¸ª  
- **å‡çº§ç±»**ï¼š6ä¸ª
- **æ­¦å™¨ç±»**ï¼š4ä¸ª
- **æŠ¤ç”²ç±»**ï¼š3ä¸ª
- **æ€»è®¡**ï¼š24ä¸ªç‰©å“çš„å®Œæ•´è‹±æ–‡æœ¬åœ°åŒ–

## ğŸ¯ ä¿®å¤æ•ˆæœ

### ç”¨æˆ·ä½“éªŒæ”¹è¿›
1. **è¯­è¨€ä¸€è‡´æ€§**ï¼šè‹±æ–‡çŠ¶æ€ä¸‹æ‰€æœ‰æ–‡æœ¬éƒ½æ˜¾ç¤ºä¸ºè‹±æ–‡
2. **ä¸“ä¸šæ€§**ï¼šå®Œæ•´çš„åŒè¯­æ”¯æŒä½“ç°äº†æ¸¸æˆçš„å›½é™…åŒ–å“è´¨
3. **å¯è¯»æ€§**ï¼šè‹±æ–‡ç”¨æˆ·èƒ½å¤Ÿæ­£ç¡®ç†è§£æ¸¸æˆæç¤º

### æŠ€æœ¯æ”¹è¿›
1. **æœ¬åœ°åŒ–æœºåˆ¶**ï¼šç»Ÿä¸€äº†æœ¬åœ°åŒ–å¤„ç†æµç¨‹
2. **ä»£ç ç®€åŒ–**ï¼šç§»é™¤äº†å†—ä½™çš„ç¿»è¯‘è°ƒç”¨
3. **ç»´æŠ¤æ€§**ï¼šé›†ä¸­ç®¡ç†ç¿»è¯‘æ–‡æœ¬ï¼Œä¾¿äºåç»­ç»´æŠ¤

## ğŸ”§ æŠ€æœ¯ç»†èŠ‚

### NotificationManager æœ¬åœ°åŒ–æœºåˆ¶
```dart
// NotificationManager å†…éƒ¨å¤„ç†ç¿»è¯‘
String _localizeMessage(String message) {
  // 1. å°è¯•ç›´æ¥ç¿»è¯‘
  String directTranslation = localization.translate(message);
  if (directTranslation != message) {
    return directTranslation;
  }
  
  // 2. å°è¯•é€šçŸ¥ä¸“ç”¨é”®
  String notificationKey = 'notifications.$message';
  String notificationTranslation = localization.translate(notificationKey);
  if (notificationTranslation != notificationKey) {
    return notificationTranslation;
  }
  
  // 3. è¿”å›åŸå§‹æ¶ˆæ¯ï¼ˆå¦‚æœæ²¡æœ‰æ‰¾åˆ°ç¿»è¯‘ï¼‰
  return message;
}
```

### æœ¬åœ°åŒ–é”®ç»“æ„
```
craftables.{item_name}.{message_type}
```

**ç¤ºä¾‹**ï¼š
- `craftables.torch.buildMsg` â†’ "a torch to light the way"
- `craftables.trap.maxMsg` â†’ "more traps won't help now"

## ğŸ“‹ æ€»ç»“

è¿™æ¬¡ä¿®å¤æˆåŠŸè§£å†³äº†è‹±æ–‡æœ¬åœ°åŒ–çš„é—®é¢˜ï¼Œå®ç°äº†å®Œæ•´çš„åŒè¯­æ”¯æŒï¼š

1. **ä¿®å¤äº†åŒé‡ç¿»è¯‘é—®é¢˜**ï¼šç»Ÿä¸€äº†æœ¬åœ°åŒ–å¤„ç†æœºåˆ¶
2. **æ·»åŠ äº†å®Œæ•´çš„è‹±æ–‡ç¿»è¯‘**ï¼šè¦†ç›–äº†æ‰€æœ‰å¯åˆ¶ä½œç‰©å“
3. **æå‡äº†ç”¨æˆ·ä½“éªŒ**ï¼šè‹±æ–‡ç”¨æˆ·ç°åœ¨èƒ½å¤Ÿæ­£ç¡®çœ‹åˆ°è‹±æ–‡æç¤º

ä¿®å¤è¿‡ç¨‹ä¸¥æ ¼éµå¾ªäº†æœ€å°åŒ–ä¿®æ”¹åŸåˆ™ï¼Œåªä¿®æ”¹äº†æœ‰é—®é¢˜çš„éƒ¨åˆ†ï¼Œä¿æŒäº†ä»£ç çš„ç¨³å®šæ€§ã€‚è¿™ä¸ºA Dark Room Flutterç‰ˆæœ¬çš„å›½é™…åŒ–æ”¯æŒå¥ å®šäº†åšå®çš„åŸºç¡€ã€‚

### ğŸ‰ æœ€ç»ˆæˆæœ

ç°åœ¨æ¸¸æˆæ”¯æŒå®Œæ•´çš„ä¸­è‹±æ–‡åŒè¯­ï¼š
- **ä¸­æ–‡æ¨¡å¼**ï¼šæ‰€æœ‰æ–‡æœ¬æ˜¾ç¤ºä¸ºä¸­æ–‡
- **è‹±æ–‡æ¨¡å¼**ï¼šæ‰€æœ‰æ–‡æœ¬æ˜¾ç¤ºä¸ºè‹±æ–‡  
- **è¯­è¨€åˆ‡æ¢**ï¼šå®æ—¶ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯
- **æœ¬åœ°åŒ–å®Œæ•´æ€§**ï¼šè¦†ç›–äº†æ‰€æœ‰æ¸¸æˆå…ƒç´ 
